<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Payment Successful ‚Äî TrustCar.io</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Nunito', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif; background:#f5f8fa; color:#0b1724; margin:0; }
    header{background: linear-gradient(135deg, #0553F0 0%, #0441c7 100%);color:#fff;padding:1.5rem 5%; box-shadow: 0 2px 8px rgba(5,83,240,0.15); font-weight: 800; font-size: 1.8rem;}
    main{padding:4rem 5%;display:flex;justify-content:center}
    .card{background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);padding:3rem;border-radius:16px;max-width:720px;text-align:center;box-shadow:0 8px 24px rgba(2,6,23,0.1); border: 2px solid #e6eefc;}
    .card h1 { font-weight: 800; font-size: 2.2rem; margin-bottom: 1rem; }
    .card > p { font-weight: 500; color: #475569; line-height: 1.6; }
    a.button{display:inline-block;margin-top:1.5rem;padding:1rem 2.5rem;border-radius:12px;background: linear-gradient(135deg, #0553F0 0%, #0441c7 100%);color:#fff;text-decoration:none; font-weight: 700; box-shadow: 0 4px 12px rgba(5,83,240,0.25); transition: all .2s;}
    a.button:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(5,83,240,0.35); }
    .info-box { background: linear-gradient(135deg, #e6f4ff 0%, #d1e9ff 100%); border:2px solid #0553F0; border-radius:12px; padding:1.5rem; margin:1.5rem 0; text-align:left; box-shadow: 0 2px 8px rgba(5,83,240,0.1); }
    .info-box h3 { margin:0 0 0.75rem 0; color:#0553F0; font-size:1.15rem; font-weight: 800; }
    .info-box p { margin:0.5rem 0; font-size:0.95rem; font-weight: 500; }
  </style>
</head>
<body>
  <header>
    <div class="logo">TrustCar.io</div>
  </header>
  <main>
    <div class="card">
      <h1>‚úÖ Payment Complete</h1>
      <p>Your transaction was successful. We emailed a receipt to your email address.</p>
      
      <div class="info-box">
        <h3>üìã What Happens Next?</h3>
        <p>‚Ä¢ You'll receive a seller upload link within 24 hours</p>
        <p>‚Ä¢ Seller completes 20-photo checklist (takes 5-10 minutes)</p>
        <p>‚Ä¢ Our AI analyzes the photos for damage and fraud signals</p>
        <p>‚Ä¢ You receive your complete inspection report in 48-72 hours</p>
      </div>

      <div class="info-box" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);border-color:#10b981;">
        <h3>üìä View Your Report</h3>
        <p>Once your inspection is complete, you'll receive an email with your Inspection ID. Use it to access your full report:</p>
        <p style="margin-top:1rem;"><a href="/view-report.html" style="color:#10b981;font-weight:700;text-decoration:none;">‚Üí View My Inspection Report</a></p>
      </div>

      <a class="button" href="/enter-vin.html?purchased=true">Start Your Inspection</a>
      <p style="margin-top:1.5rem;"><a href="/" style="color:#0553F0;font-weight:700;text-decoration:none;">‚Üê Back to Home</a></p>
    </div>
  </main>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    // Initialize Stripe on success page
    (async () => {
      try {
        // Fetch publishable key from server
        const configRes = await fetch('/api/stripe/config');
        if (configRes.ok) {
          const config = await configRes.json();
          const publishableKey = config.publishableKey || 'pk_test_51234567890';
          if (publishableKey && publishableKey.startsWith('pk_')) {
            const stripe = Stripe(publishableKey);
            console.log('Stripe initialized on success page');
            // Store for any future usage
            window.stripeInstance = stripe;
          }
        }
      } catch (e) {
        console.warn('Could not initialize Stripe on success page:', e);
      }
    })();
  </script>
</body>
</html>
