<!DOCTYPE html>
<html>
<head>
    <title>Queue Test</title>
    <script defer src="/auth.js"></script>
</head>
<body>
    <h1>Testing Queue API</h1>
    <div id="output"></div>
    <script>
        const auth = 'Basic ' + btoa('admin:admin');
        const output = document.getElementById('output');
        
        output.innerHTML = '<p>Fetching data...</p>';
        
        Promise.all([
            fetch('/api/inspections', { headers: { Authorization: auth } }),
            fetch('/api/inspections/all-uploads', { headers: { Authorization: auth } })
        ])
        .then(([inspRes, uploadsRes]) => {
            output.innerHTML += `<p>Inspections status: ${inspRes.status}</p>`;
            output.innerHTML += `<p>Uploads status: ${uploadsRes.status}</p>`;
            return Promise.all([inspRes.json(), uploadsRes.json()]);
        })
        .then(([inspections, uploads]) => {
            output.innerHTML += `<p>Inspections count: ${inspections.length}</p>`;
            output.innerHTML += `<p>Uploads count: ${uploads.length}</p>`;
            output.innerHTML += `<pre>${JSON.stringify(inspections, null, 2)}</pre>`;
        })
        .catch(err => {
            output.innerHTML += `<p style="color:red;">Error: ${err.message}</p>`;
        });
    </script>
</body>
</html>
